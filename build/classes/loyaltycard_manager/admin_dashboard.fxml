<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx/20.0.1"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="controller.AdminDashboardController">

    <!-- ðŸŒˆ Sidebar -->
    <left>
        <VBox spacing="20" style="-fx-background-color: linear-gradient(to bottom, #2C3E50, #34495E);" prefWidth="220">
            <padding>
                <Insets top="40" right="20" bottom="40" left="20"/>
            </padding>

            <Label text="âš™ Admin Dashboard" style="-fx-text-fill: white; -fx-font-size: 22px; -fx-font-weight: bold;"/>

            <Button text="ðŸ  Home" prefWidth="180" 
                    style="-fx-background-color: #1ABC9C; -fx-text-fill: white; -fx-font-size: 16px; -fx-background-radius: 8px;"
                    onAction="#showDashboard"/>
            <Button text="ðŸ‘¥ Users" prefWidth="180" 
                    style="-fx-background-color: #3498DB; -fx-text-fill: white; -fx-font-size: 16px; -fx-background-radius: 8px;"
                    onAction="#showUsers"/>
            <Button text="ðŸ’³ Cards" prefWidth="180" 
                    style="-fx-background-color: #9B59B6; -fx-text-fill: white; -fx-font-size: 16px; -fx-background-radius: 8px;"/>
            <Button text="ðŸ“Š Transactions" prefWidth="180" 
                    style="-fx-background-color: #F39C12; -fx-text-fill: white; -fx-font-size: 16px; -fx-background-radius: 8px;"/>
            <Button text="ðŸšª Logout" prefWidth="180" 
                    style="-fx-background-color: #E74C3C; -fx-text-fill: white; -fx-font-size: 16px; -fx-background-radius: 8px;"/>
        </VBox>
    </left>

    <!-- ðŸŒ Top Bar -->
    <top>
        <HBox spacing="20" style="-fx-background-color: #16A085;" prefHeight="60" alignment="CENTER_RIGHT">
            <padding>
                <Insets top="10" right="25" bottom="10" left="25"/>
            </padding>
            <Label text="Welcome to the Admin Panel" style="-fx-text-fill: white; -fx-font-size: 18px; -fx-font-weight: bold;"/>
        </HBox>
    </top>

    <!-- ðŸ’¡ Main Content Area -->
    <center>
        <StackPane fx:id="mainContent" style="-fx-background-color: #ECF0F1;">
            <!-- Dashboard Summary VBox -->
            <VBox fx:id="dashboardSummary" spacing="25" alignment="TOP_CENTER" >
                <padding>
                    <Insets top="40" right="50" bottom="40" left="50"/>
                </padding>

                <Label text="ðŸ“ˆ Dashboard Summary" style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #2C3E50;"/>
                <Separator prefWidth="600"/>

                <!-- Info Boxes -->
                <HBox spacing="30" alignment="CENTER">
                    <VBox spacing="10" alignment="CENTER" style="-fx-background-color: #1ABC9C; -fx-background-radius: 12px;" prefWidth="180" prefHeight="100">
                        <Label text="ðŸ‘¥ Users" style="-fx-text-fill: white; -fx-font-size: 18px;"/>
                        <Label text="120" fx:id="userCountLabel" style="-fx-text-fill: white; -fx-font-size: 22px; -fx-font-weight: bold;"/>
                    </VBox>

                    <VBox spacing="10" alignment="CENTER" style="-fx-background-color: #3498DB; -fx-background-radius: 12px;" prefWidth="180" prefHeight="100">
                        <Label text="ðŸ’³ Active Cards" style="-fx-text-fill: white; -fx-font-size: 18px;"/>
                        <Label text="85" fx:id="activeCardsLabel" style="-fx-text-fill: white; -fx-font-size: 22px; -fx-font-weight: bold;"/>
                    </VBox>

                    <VBox spacing="10" alignment="CENTER" style="-fx-background-color: #E67E22; -fx-background-radius: 12px;" prefWidth="180" prefHeight="100">
                        <Label text="ðŸ“Š Today's Txns" style="-fx-text-fill: white; -fx-font-size: 18px;"/>
                        <Label text="30" fx:id="todaysTxnLabel" style="-fx-text-fill: white; -fx-font-size: 22px; -fx-font-weight: bold;"/>
                    </VBox>
                </HBox>
            </VBox>

            <!-- Users Table VBox - initially hidden -->
            <VBox fx:id="usersView" spacing="10" alignment="TOP_CENTER" visible="false" managed="false" >
                <Label text="ðŸ‘¥ Registered Users" style="-fx-font-size: 26px; -fx-font-weight: bold; -fx-text-fill: #2C3E50;" />
                <TableView fx:id="usersTable" prefWidth="700" prefHeight="400">
                    <columns>
                        <TableColumn fx:id="colId" text="ID" prefWidth="50" />
                        <TableColumn fx:id="colFullName" text="Full Name" prefWidth="150" />
                        <TableColumn fx:id="colUsername" text="Username" prefWidth="150" />
                        <TableColumn fx:id="colEmail" text="Email" prefWidth="180" />
                        <TableColumn fx:id="colPhone" text="Phone" prefWidth="120" />
                        <TableColumn fx:id="colCreatedAt" text="Created At" prefWidth="150" />
                    </columns>
                </TableView>
                <Button text="Back to Dashboard" onAction="#showDashboard" 
                        style="-fx-background-color: #3498DB; -fx-text-fill: white; -fx-font-size: 14px; -fx-background-radius: 8px;"/>
            </VBox>
        </StackPane>
    </center>
</BorderPane>
